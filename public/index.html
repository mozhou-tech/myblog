<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Tenstone - 刘远程&#39;s祖传博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Tenstone - 刘远程's祖传博客">
<meta property="og:url" content="http://tenstone.me/index.html">
<meta property="og:site_name" content="Tenstone - 刘远程's祖传博客">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Tenstone - 刘远程's祖传博客">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="Tenstone - 刘远程&#39;s祖传博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://tenstone.me/images/avatar.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Tenstone</a></h1>
		</hgroup>

		
		<p class="header-subtitle">刘远程&#39;s祖传博客</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/categories/IT技术/">技术思考</a></li>
				        
							<li><a href="/categories/随笔/">生活随笔</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/tenstone" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/511231870" title="weibo">weibo</a>
					        
								<a class="zhihu" target="_blank" href="http://www.zhihu.com/people/lyc90" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/CentOS/" style="font-size: 10px;">CentOS</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/写作/" style="font-size: 13.33px;">写作</a> <a href="/tags/创业/" style="font-size: 16.67px;">创业</a> <a href="/tags/快捷笔记/" style="font-size: 20px;">快捷笔记</a> <a href="/tags/快速笔记/" style="font-size: 10px;">快速笔记</a> <a href="/tags/搜索熊“寻人启事”/" style="font-size: 13.33px;">搜索熊“寻人启事”</a> <a href="/tags/运营/" style="font-size: 10px;">运营</a> <a href="/tags/随笔/" style="font-size: 10px;">随笔</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://overtrue.me/">安正超的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.knowledgeway.cn/">朱业峰的博客</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">风一样的男人</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Tenstone</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://tenstone.me/images/avatar.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Tenstone</h1>
			</hgroup>
			
			<p class="header-subtitle">刘远程&#39;s祖传博客</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/categories/IT技术/">技术思考</a></li>
		        
					<li><a href="/categories/随笔/">生活随笔</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/tenstone" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/511231870" title="weibo">weibo</a>
			        
						<a class="zhihu" target="_blank" href="http://www.zhihu.com/people/lyc90" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-APICloud和ionicFramework的比较" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/07/APICloud和ionicFramework的比较/" class="article-date">
  	<time datetime="2016-01-07T08:46:15.000Z" itemprop="datePublished">2016-01-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/07/APICloud和ionicFramework的比较/">APICloud和ionicFramework的比较</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>一直鄙视国产厂商，但这一次比较狠狠的打了自己一记巴掌。<br>APICloud的api对象封装了常用的APP交互，使其封装出来的APP和原生开发的APP一样流畅。虽然打包方式和原理和ionic一样都是用了<a href="http://cordova.apache.org" target="_blank" rel="external">Cordova</a>，但是APICloud有下列的优点：</p>
<blockquote>
<ol>
<li>APICloud把常用的交互操作和支付宝等模块都封装进去了</li>
<li>打包服务器在云端实现了，不必再自己倒腾编译环境</li>
</ol>
</blockquote>
<p>这样就使APP混合开发的弊端去掉大半，优点还是一件不少，足以满足大多数的开发需要。以后这种开发模式必将占领APP开发领域的半壁江山。<br>不过，我还是想尝试一下，把ionic和apiCloud的优势结合起来。</p>
<p>给做好事的公司做个广告：<a href="http://apicloud.com" target="_blank" rel="external">APICloud</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/快捷笔记/">快捷笔记</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/IT技术/">IT技术</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-LiveReload实现浏览器自动刷新" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/06/LiveReload实现浏览器自动刷新/" class="article-date">
  	<time datetime="2016-01-06T08:47:28.000Z" itemprop="datePublished">2016-01-06</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/06/LiveReload实现浏览器自动刷新/">LiveReload实现浏览器自动刷新</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="再也不用按F5，节省了不少时间">再也不用按F5，节省了不少时间</h2><p>昨天突然阅读到一篇文章<a href="http://andremadarang.com/livereload-and-browsersync-with-laravel/" target="_blank" rel="external">LiveReload admin Browsersync with Laravel</a>，于是乎发现了两个不错的前端开发辅助项目<a href="https://www.browsersync.io/" target="_blank" rel="external">Browsersync</a>和<a href="http://livereload.com/" target="_blank" rel="external">LiveReload</a>。</p>
<h2 id="LiveReload">LiveReload</h2><ol>
<li><p>目前使用的是PhpStorm编辑器，使用的是Laravel，所以配置文件可能和gulp.js-livereload不同，以下是gulpfile.js配置详细：</p>
<pre><code>var elixir = require<span class="list">(<span class="quoted">'laravel-elixir</span>')</span><span class="comment">;</span>
    require<span class="list">(<span class="quoted">'laravel-elixir-livereload</span>')</span><span class="comment">;       </span>
    elixir<span class="list">(<span class="keyword">function</span> <span class="list">(<span class="keyword">mix</span>)</span> {
    mix.livereload<span class="list">()</span><span class="comment">;</span>
})</span><span class="comment">;</span>
</code></pre></li>
<li><p>安装<a href="https://chrome.google.com/webstore/detail/livereload/jnihajbhpnppcggbcgedagnkighmdlei?hl=zh-CN" target="_blank" rel="external">Chrome插件</a></p>
</li>
<li><p>如果你没有使用Laravel，那么请参考<a href="https://cnodejs.org/topic/53427d16dc556e3b3901861e" target="_blank" rel="external">中文资料</a>，对应的grulpfile.js：</p>
<pre><code><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),livereload = <span class="built_in">require</span>(<span class="string">'gulp-livereload'</span>);
gulp.task(<span class="string">'watch'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{    <span class="comment">// 这里的watch，是自定义的，写成live或者别的也行</span>
    <span class="keyword">var</span> server = livereload();
    <span class="comment">// app/**/*.*的意思是 app文件夹下的 任何文件夹 的 任何文件</span>
    gulp.watch(<span class="string">'app/**/*.*'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">file</span>) </span>{
        server.changed(file.path);
    }); 
});
</code></pre></li>
<li><p>执行gulp watch并点击浏览器上的“Enable Livereload”开始你的前端开发新旅程吧！</p>
</li>
</ol>
<h3 id="提示：">提示：</h3><p>网页要使用服务器打开，如果你使用laravel，则运行</p>
<pre><code><span class="title">php</span> artisan serve
</code></pre><p>如果是在线调试，打开你对应的页面，只要在对应的页面开启“Livereload”插件即可。        </p>
<h2 id="Browsersync">Browsersync</h2><p>这是从官网翻译来的介绍，</p>
<blockquote>
<p>Browsersync能让浏览器实时、快速响应您的文件更改（html、js、css、sass、less等）并自动刷新页面。更重要的是 Browsersync可以同时在PC、平板、手机等设备下进项调试。您可以想象一下：“假设您的桌子上有pc、ipad、iphone、android等设备，同时打开了您需要调试的页面，当您使用browsersync后，您的任何一次代码保存，以上的设备都会同时显示您的改动”。无论您是前端还是后端工程师，使用它将提高您30%的工作效率。</p>
</blockquote>
<p>想必你已经心动了吧？稍后奉上详细的配置方法。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/快速笔记/">快速笔记</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/IT技术/">IT技术</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Nodejs-NPM的使用" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/05/Nodejs-NPM的使用/" class="article-date">
  	<time datetime="2016-01-05T01:11:59.000Z" itemprop="datePublished">2016-01-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/05/Nodejs-NPM的使用/">Nodejs NPM的使用</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>npm install b –save會幫你安裝並添加依赖</p>
<pre><code>npm config <span class="built_in">set</span> strict-ssl <span class="constant">false</span>            <span class="comment"> //关闭npm的HTTPS</span>
npm config <span class="built_in">set</span> registry <span class="string">"http://registry.npmjs.org/"</span>   <span class="comment"> //设置npm的获取地址</span>
npm config <span class="built_in">set</span> proxy=<span class="keyword">http</span>://代理服务器ip:代理服务器端口 

npm config <span class="built_in">delete</span> <span class="keyword">http</span>-proxy   <span class="comment"> // 清除npm代理</span>
npm config <span class="built_in">delete</span> <span class="keyword">https</span>-proxy
</code></pre><p><a href="https://github.com/nimojs/blog/issues/20" target="_blank" rel="external">淘宝NPM镜像</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/快捷笔记/">快捷笔记</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/IT技术/">IT技术</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Composer和Laravel的一些小技巧" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/21/Composer和Laravel的一些小技巧/" class="article-date">
  	<time datetime="2015-12-21T08:35:58.000Z" itemprop="datePublished">2015-12-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/21/Composer和Laravel的一些小技巧/">Composer和Laravel的一些小技巧</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Composer_两个小技巧">Composer 两个小技巧</h2><p>使用Composer以后，Laravel的开发效率提升了不止一点点</p>
<ol>
<li>composer update foo/bar  // 更新单个库</li>
<li>composer update nothing  // 仅更新composer.lock</li>
<li>composer require “foo/bar:1.0.0”  // 无需编辑composer.json直接安装库  </li>
<li>composer dump-autoload –optimize  // 生产环境中优化自动加载，提升性能</li>
<li>composer config -g repo.packagist   // composer <a href="http://packagist.phpcomposer.com" target="_blank" rel="external">http://packagist.phpcomposer.com</a> 设置国内镜像<a href="http://pkg.phpcomposer.com" target="_blank" rel="external">参考地址</a></li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/快捷笔记/">快捷笔记</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/IT技术/">IT技术</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-CentOS-7一键部署VPN" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/18/CentOS-7一键部署VPN/" class="article-date">
  	<time datetime="2015-12-18T02:47:01.000Z" itemprop="datePublished">2015-12-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/18/CentOS-7一键部署VPN/">CentOS 7一键部署VPN</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>参考：<a href="https://blog.linuxeye.com/412.html" target="_blank" rel="external">https://blog.linuxeye.com/412.html</a></p>
<p>从Windows Copy到Linux时，解决/bin/bash^M: bad interpreter: No such file or directory问题</p>
<pre><code>sed -<span class="tag">i</span> -e <span class="string">'s/\r$//'</span> vpn_setup.sh
</code></pre><p>vpn_setup.sh 脚本内容</p>
<pre><code><span class="shebang">#!/bin/bash</span>
<span class="comment">#</span>
<span class="comment"># Author:  yeho &lt;lj2007331 AT gmail.com&gt;</span>
<span class="comment"># Blog:  http://blog.linuxeye.com</span>
<span class="comment">#</span>
<span class="comment"># Installs a PPTP VPN-only system for CentOS</span>

<span class="comment"># Check if user is root</span>
[ $(id -u) != <span class="string">"0"</span> ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"Error: You must be root to run this script"</span> &amp;&amp; <span class="built_in">exit</span> <span class="number">1</span>

<span class="built_in">export</span> PATH=/usr/<span class="built_in">local</span>/sbin:/usr/<span class="built_in">local</span>/bin:/sbin:/bin:/usr/sbin:/usr/bin
clear
<span class="built_in">printf</span> <span class="string">"
#######################################################################
#    LNMP/LAMP/LANMP for CentOS/RadHat 5+ Debian 6+ and Ubuntu 12+    #
# For more information please visit http://blog.linuxeye.com/31.html  #
#######################################################################
"</span>

[ ! <span class="operator">-e</span> <span class="string">'/usr/bin/curl'</span> ] &amp;&amp; yum -y install curl

VPN_IP=`curl ipv4.icanhazip.com`

VPN_USER=<span class="string">"linuxeye"</span>
VPN_PASS=<span class="string">"linuxeye"</span>

VPN_LOCAL=<span class="string">"192.168.0.150"</span>
VPN_REMOTE=<span class="string">"192.168.0.151-200"</span>

<span class="keyword">while</span> :
<span class="keyword">do</span>
        <span class="built_in">echo</span>
        <span class="built_in">read</span> -p <span class="string">"Please input username: "</span> VPN_USER 
        [ -n <span class="string">"<span class="variable">$VPN_USER</span>"</span> ] &amp;&amp; <span class="built_in">break</span>
<span class="keyword">done</span>

<span class="keyword">while</span> :
<span class="keyword">do</span>
        <span class="built_in">echo</span>
        <span class="built_in">read</span> -p <span class="string">"Please input password: "</span> VPN_PASS
        [ -n <span class="string">"<span class="variable">$VPN_PASS</span>"</span> ] &amp;&amp; <span class="built_in">break</span>
<span class="keyword">done</span>
clear


<span class="keyword">if</span> [ -n <span class="string">"`grep 'CentOS Linux release 7' /etc/redhat-release`"</span> ];<span class="keyword">then</span>
        <span class="comment">#CentOS_REL=7</span>
    <span class="keyword">if</span> [ ! <span class="operator">-e</span> /etc/yum.repos.d/epel.repo ];<span class="keyword">then</span>
        cat &gt; /etc/yum.repos.d/epel.repo &lt;&lt; EOF
[epel]
name=Extra Packages <span class="keyword">for</span> Enterprise Linux <span class="number">7</span> - \<span class="variable">$basearch</span>
<span class="comment">#baseurl=http://download.fedoraproject.org/pub/epel/7/\$basearch</span>
mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-<span class="number">7</span>&amp;arch=\<span class="variable">$basearch</span>
failovermethod=priority
enabled=<span class="number">1</span>
gpgcheck=<span class="number">0</span>
EOF
<span class="keyword">fi</span>
        <span class="keyword">for</span> Package <span class="keyword">in</span> wget make openssl gcc-c++ ppp pptpd iptables iptables-services 
        <span class="keyword">do</span>
                yum -y install <span class="variable">$Package</span>
        <span class="keyword">done</span>
        <span class="built_in">echo</span> <span class="string">'net.ipv4.ip_forward = 1'</span> &gt;&gt; /etc/sysctl.conf
<span class="keyword">elif</span> [ -n <span class="string">"`grep 'CentOS release 6' /etc/redhat-release`"</span> ];<span class="keyword">then</span>
        <span class="comment">#CentOS_REL=6</span>
        <span class="keyword">for</span> Package <span class="keyword">in</span> wget make openssl gcc-c++ iptables ppp 
        <span class="keyword">do</span>
                yum -y install <span class="variable">$Package</span>
        <span class="keyword">done</span>
    sed -i <span class="string">'s@net.ipv4.ip_forward.*@net.ipv4.ip_forward = 1@g'</span> /etc/sysctl.conf
    rpm -Uvh http://poptop.sourceforge.net/yum/stable/rhel6/pptp-release-current.noarch.rpm
    yum -y install pptpd
<span class="keyword">else</span>
        <span class="built_in">echo</span> <span class="operator">-e</span> <span class="string">"\033[31mDoes not support this OS, Please contact the author! \033[0m"</span>
        <span class="built_in">exit</span> <span class="number">1</span>
<span class="keyword">fi</span>


<span class="built_in">echo</span> <span class="string">"1"</span> &gt; /proc/sys/net/ipv4/ip_forward

sysctl -p /etc/sysctl.conf

[ -z <span class="string">"`grep '^localip' /etc/pptpd.conf`"</span> ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"localip <span class="variable">$VPN_LOCAL</span>"</span> &gt;&gt; /etc/pptpd.conf <span class="comment"># Local IP address of your VPN server</span>
[ -z <span class="string">"`grep '^remoteip' /etc/pptpd.conf`"</span> ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"remoteip <span class="variable">$VPN_REMOTE</span>"</span> &gt;&gt; /etc/pptpd.conf <span class="comment"># Scope for your home network</span>

<span class="keyword">if</span> [ -z <span class="string">"`grep '^ms-dns' /etc/ppp/options.pptpd`"</span> ];<span class="keyword">then</span>
    <span class="built_in">echo</span> <span class="string">"ms-dns 8.8.8.8"</span> &gt;&gt; /etc/ppp/options.pptpd <span class="comment"># Google DNS Primary</span>
    <span class="built_in">echo</span> <span class="string">"ms-dns 209.244.0.3"</span> &gt;&gt; /etc/ppp/options.pptpd <span class="comment"># Level3 Primary</span>
    <span class="built_in">echo</span> <span class="string">"ms-dns 208.67.222.222"</span> &gt;&gt; /etc/ppp/options.pptpd <span class="comment"># OpenDNS Primary</span>
<span class="keyword">fi</span>

<span class="built_in">echo</span> <span class="string">"<span class="variable">$VPN_USER</span> pptpd <span class="variable">$VPN_PASS</span> *"</span> &gt;&gt; /etc/ppp/chap-secrets

ETH=`route | grep default | awk <span class="string">'{print $NF}'</span>`
[ -z <span class="string">"`grep '1723 -j ACCEPT' /etc/sysconfig/iptables`"</span> ] &amp;&amp; iptables -I INPUT <span class="number">4</span> -p tcp -m state --state NEW -m tcp --dport <span class="number">1723</span> -j ACCEPT
[ -z <span class="string">"`grep 'gre -j ACCEPT' /etc/sysconfig/iptables`"</span> ] &amp;&amp; iptables -I INPUT <span class="number">5</span> -p gre -j ACCEPT 
iptables -t nat -A POSTROUTING -o <span class="variable">$ETH</span> -j MASQUERADE
service iptables save
sed -i <span class="string">'s@^-A INPUT -j REJECT --reject-with icmp-host-prohibited@#-A INPUT -j REJECT --reject-with icmp-host-prohibited@'</span> /etc/sysconfig/iptables 
sed -i <span class="string">'s@^-A FORWARD -j REJECT --reject-with icmp-host-prohibited@#-A FORWARD -j REJECT --reject-with icmp-host-prohibited@'</span> /etc/sysconfig/iptables 
service iptables restart

service pptpd restart
chkconfig pptpd on
clear

<span class="built_in">echo</span> <span class="operator">-e</span> <span class="string">"You can now connect to your VPN via your external IP \033[32m<span class="variable">${VPN_IP}</span>\033[0m"</span>

<span class="built_in">echo</span> <span class="operator">-e</span> <span class="string">"Username: \033[32m<span class="variable">${VPN_USER}</span>\033[0m"</span>
<span class="built_in">echo</span> <span class="operator">-e</span> <span class="string">"Password: \033[32m<span class="variable">${VPN_PASS}</span>\033[0m"</span>
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CentOS/">CentOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/快捷笔记/">快捷笔记</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/IT技术/">IT技术</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-CentOS-7下安装MySQL使用参考" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/18/CentOS-7下安装MySQL使用参考/" class="article-date">
  	<time datetime="2015-12-18T01:16:49.000Z" itemprop="datePublished">2015-12-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/18/CentOS-7下安装MySQL使用参考/">CentOS 7下安装MySQL使用参考</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>部署环境：CentOS下安装MySQL5.6.28。一开始安装MySQL5.7.10也是遇到这个问题。</p>
<h2 id="改变数据目录后无法启动">改变数据目录后无法启动</h2><p>倒腾了一天，最后执行了一个软连接命令就解决了。至于原因到底是什么，还不清楚，但是这种方法解决了问题。</p>
<pre><code>ln <span class="operator">-s</span> /alidata/mysqldata mysql
<span class="comment">#ln -s 源目录 目录或连接名</span>
</code></pre><h2 id="数据转移">数据转移</h2><p>以前一直使用Navicat通过数据传输的方式转移或备份数据，但是今天转移数据到正式服时，一直报错并显示</p>
<pre><code><span class="built_in">Data</span> truncated f<span class="subst">or</span> column <span class="string">`???`</span> ??? <span class="attribute">...</span>
</code></pre><p>看起来Navicat把数据截断了，后来使用mysqldump转移成功</p>
<pre><code>mysqldump -u root qjiatrip &gt; backup<span class="class">.sql</span>
<span class="id">#mysqldump</span> -u 用户名 数据库名 &gt; 备份名.sql
</code></pre><p>嗯，就是这样。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/快捷笔记/">快捷笔记</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/IT技术/">IT技术</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-来一掌O2O平台技术架构" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/04/来一掌O2O平台技术架构/" class="article-date">
  	<time datetime="2015-12-04T09:00:35.000Z" itemprop="datePublished">2015-12-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/04/来一掌O2O平台技术架构/">来一掌O2O平台技术架构</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>来一掌CTO还是我人生路上还是比较重要的一个角色。留下技术笔记，供后来回忆，也给大家用来参考。</p>
<h2 id="技术框架">技术框架</h2><p>后台：CentOS、Nginx、PHP、MySQL<br>前端：Angularjs<br>PHP framework：Laravel<br>选择前端框架的时候，纠结了好一整子，错过了ionicframework。后来发现企查查把这个基于Angularjs的框架用的很好，所以我在自己的另一个“灸法速查”项目中用了起来，效率还是挺高的。</p>
<h2 id="说说Modern_PHP">说说Modern PHP</h2><p>后来才知道更多人用的是PHP5.3以前的版本，当时花了很多时间找到这个Laravel框架，14年底刚刚开始在国内流行，但是在国外已经风生水气了。一个最大的好处是借鉴了Linux的包管理机制，在<a href="http://packagist.org" target="_blank" rel="external">packagist.org</a>可以找到大多数你需要开发，但是已经有人做好了的功能。所需要做的，就是把包名加入composer.json，执行php composer.phar update，然后参照文档编写。<br>如果你想更深入的了解Modern PHP，可以Star这个仓库：<a href="https://github.com/laravel-china/php-the-right-way" target="_blank" rel="external">https://github.com/laravel-china/php-the-right-way</a>。</p>
<h2 id="RESTful风格">RESTful风格</h2><p>前端与后端，所有的数据都是Ajax获取，这也造成了页面卡顿需要加载时间，或许引入缓加载可以减轻这个问题。这么做的好处是，在将来开发安卓和iOS端的时候，没必要再重新做一遍后端开发了。其实在年底的时候，已经发现大多数人采用了这种方式，也有人比我们优化的更好。<br>后来做一个SCM系统时，采用了传统的网页方式，RESTful有以下好处：</p>
<blockquote>
<ol>
<li>减少查询次数，提升并发能力，提升访问速度</li>
<li>将来可以与iOS和Android兼容</li>
<li>简化后台数据存取逻辑，实际是转移到前端去了</li>
<li>在结合Angularjs等前端MVVM框架的时候，实现但页面应用</li>
</ol>
</blockquote>
<h2 id="基于系统可靠性的考虑">基于系统可靠性的考虑</h2><ol>
<li>使用事务管理</li>
<li>定期的数据备份（每天一次系统镜像）</li>
</ol>
<h2 id="总结">总结</h2><p>整个系统没有太大的技术难点，要说比较麻烦的地方，就是时间块的管理吧。每个推拿师的可接单时间，都被划分成块存储在可用时间表里，这部分当时有点过度设计了，但是在做的时候，并不能搞清楚需要做成什么样子。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/IT技术/">IT技术</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Git自动化部署的研究" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/04/Git自动化部署的研究/" class="article-date">
  	<time datetime="2015-12-04T08:18:22.000Z" itemprop="datePublished">2015-12-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/04/Git自动化部署的研究/">Git自动化部署的研究</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在来一掌时使用的手动Git部署脚本</p>
<pre><code><span class="shebang">#!/bin/sh</span>
<span class="built_in">echo</span> <span class="string">'Starting Deployment...'</span>
<span class="built_in">cd</span> /alidata/wwwroot/laiyizhang_v2
sudo -u apache git reset --hard
sudo -u apache git pull git@bitbucket.org:laiyizhang/laiyizhang_v2.git master

gulp mobile-lib-js
gulp mobile-app-js
gulp mobile-app-css

php composer.phar dump-autoload
php artisan cache:clear
php artisan route:cache
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/IT技术/">IT技术</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Nginx-常用配置" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/04/Nginx-常用配置/" class="article-date">
  	<time datetime="2015-12-04T05:59:06.000Z" itemprop="datePublished">2015-12-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/04/Nginx-常用配置/">Nginx 常用配置</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>收集一些常用的Nginx配置方法，具体说明见注释。</p>
<ol>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS" target="_blank" rel="external">HTTP访问控制(CORS)</a></li>
<li><a href="http://enable-cors.org/server_nginx.html" target="_blank" rel="external">CORS on Nginx 官方配置</a></li>
</ol>
<pre><code><span class="title">location</span> / {
    <span class="title">index</span>  index.php index.html index.htm;
    <span class="comment"># 隐藏index.php</span>
    <span class="title">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.php<span class="variable">$is_args</span><span class="variable">$query_string</span>;
    <span class="comment"># CORS 预请求</span>
    <span class="title">if</span> (<span class="variable">$request_method</span> = <span class="string">'OPTIONS'</span>) {
        <span class="title">add_header</span> Access-Control-Allow-Origin *;
        <span class="title">add_header</span> Access-Control-Allow-Credentials <span class="built_in">true</span>;
        <span class="title">add_header</span> Access-Control-Allow-Methods <span class="string">'GET, POST, OPTIONS'</span>;
        <span class="title">add_header</span> <span class="string">'Access-Control-Allow-Headers'</span> <span class="string">'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type'</span>;
        <span class="title">return</span> <span class="number">200</span>;
    }
}
<span class="comment"># 配置字体可以跨站调用</span>
<span class="title">location</span> <span class="regexp">~* \.(eot|ttf|woff|svg)$</span> {
    <span class="title">add_header</span> Access-Control-Allow-Origin *;
}

 <span class="comment"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span>
 <span class="comment">#</span>
 <span class="title">location</span> <span class="regexp">~ \.php$</span> {
    <span class="title">fastcgi_pass</span>   <span class="number">127.0.0.1:9000</span>;
    <span class="title">fastcgi_index</span>  index.php;
    <span class="title">fastcgi_param</span>  SCRIPT_FILENAME  <span class="variable">$document_root</span><span class="variable">$fastcgi_script_name</span>;
    <span class="title">include</span>        fastcgi_params;
 }
</code></pre><ol>
<li>配置Nginx缓存，加速访问<a href="http://nginx.org/en/docs/http/ngx_http_headers_module.html" target="_blank" rel="external">官方参考</a></li>
</ol>
<pre><code><span class="comment"># cache.appcache, your document html and data</span>
location ~* \.(?<span class="symbol">:manifest|appcache|html?|xml|json</span>)<span class="variable">$ </span>{
  expires -<span class="number">1</span>;
  access_log logs/static.log;
}

<span class="comment"># Feed</span>
location ~* \.(?<span class="symbol">:rss|atom</span>)<span class="variable">$ </span>{
  expires <span class="number">1</span>h;
  add_header <span class="constant">Cache-Control </span><span class="string">"public"</span>;
}

<span class="comment"># Media: images, icons, video, audio, HTC</span>
location ~* \.(?<span class="symbol">:jpg|jpeg|gif|png|ico|cur|gz|svg|svgz|mp4|ogg|ogv|webm|htc</span>)<span class="variable">$ </span>{
  expires <span class="number">1</span>M;
  access_log off;
  add_header <span class="constant">Cache-Control </span><span class="string">"public"</span>;
}

<span class="comment"># CSS and Javascript</span>
location ~* \.(?<span class="symbol">:css|js</span>)<span class="variable">$ </span>{
  expires <span class="number">1</span>y;
  access_log off;
  add_header <span class="constant">Cache-Control </span><span class="string">"public"</span>;
}

<span class="comment"># WebFonts</span>
<span class="comment"># If you are NOT using cross-domain-fonts.conf, uncomment the following directive</span>
<span class="comment"># location ~* \.(?:ttf|ttc|otf|eot|woff|woff2)$ {</span>
<span class="comment">#  expires 1M;</span>
<span class="comment">#  access_log off;</span>
<span class="comment">#  add_header Cache-Control "public";</span>
<span class="comment"># }</span>
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/IT技术/">IT技术</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-寻人启事" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/02/寻人启事/" class="article-date">
  	<time datetime="2015-12-02T08:56:10.000Z" itemprop="datePublished">2015-12-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/02/寻人启事/">寻人启事</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>那时我还在Q旅行做CTO，公司正在策划一款“智能旅行”的App，其中一个很重要的功能是“智能行程规划”，当时智能行程规划的技术尚不成熟，成熟的产品更是寥寥无几，早期阶段通过各种手段抄袭X妙旅行的设计，作为一个技术核心驱动的产品，没有人才的过程那个痛苦呀！</p>
<p>在尝试了各种逆向工程分析都用了之后，对X妙旅行的核心技术还是毫无眉目。无计可施的时候却在CNKI发现了一篇叫《旅游行程规划系统关键技术研究》的硕士学位论文。</p>
<p>后来我们做了几件事，找到作者本人李建伟：</p>
<ul>
<li>在人人网上搜索这个人的名字，知道这个人从西安电子科技大学硕士毕业，现在在苏州某软工作，个人资料里留了QQ邮箱；</li>
<li>Google搜索他的QQ号码，找到他在blogbus上的技术博客；</li>
<li>从blogbus上找到他的知乎、微博主页；</li>
<li>某同事后来惊诧了一下，他同学也在苏州某软，于是通过微信取得联系；</li>
<li>然后这位同学说，李建伟坐在他旁边。</li>
</ul>
<p>当时我们就跟这篇论文的作者联系上了，作为一个创业公司，搜索帮我们寻找到人才，解决了燃眉之急。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/写作/">写作</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/搜索熊“寻人启事”/">搜索熊“寻人启事”</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/随笔/">随笔</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Tenstone
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: true
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>



<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-70840406-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->




<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>